<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>CLASSIFICATION SYSTEM</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	<meta name="description" content="" />
        <meta name="author" content="" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
	
	</head>
	<body class="is-preload" >

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">CLASSIFICATION SYSTEM</a>
					</header>

				<!-- Nav -->
					<!-- <nav id="nav">
						<ul class="links">
							<li ><a href="index.html">Home Page</a></li>
							<li><a href="login.html">Log in</a></li>
							<li><a href="signup.html">Sign up</a></li>
							<li class="active"><a href="classification.html">Classifiction</a></li>
						</ul>
						<ul class="icons">
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</nav> -->


				<!-- Footer -->
				<footer id="main">
					<section>
						<form method="post" action="#">
							<div class="fields">
								<div class="field">
									<label for="name" style="font-size: 16px;">Choose appropriate file</label>
									<input type="file" onchange="showFiles(event)" accept=".png, .jpg, .jpeg">
								</div>
						</form>
						<article class="post featured">
								<div id="DIV1" class="card-body" style="text-align: left;display: none;">
									<p >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 40px;">Class : DS-TB</span>
										<span style="font-size: 18px;">
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recommended regimen : 
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 2HRZE / 4HR
										</span>
									</p>
								</div>

								<div id="DIV2" class="card-body" style="text-align: left;display: none;">
									<p >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 40px;">Class : DR-TB</span>
										<span style="font-size: 18px;">
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recommended regimen : 
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 6RZEFQs 
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 2HRZ/4HR 
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 9 - 12REFQs 
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 6 - 9RZFQs 
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 2-3AG*RFQsEto /10RFQsEto
										</span>
									</p>
								</div>

								<div id="DIV3" class="card-body" style="text-align: left;display: none;">
									<p >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 40px;">Class : MDR-TB</span>
										<span style="font-size: 18px;">
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recommended regimen : 
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - shorter all-oral bedaquiline-containing regimen
										</span>
									</p>
								</div>

								<div id="DIV4" class="card-body" style="text-align: left;display: none;">
									<p >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 40px;">Class : XDR-TB</span>
										<span style="font-size: 18px;">
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Recommended regimen : 
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 4(A/B)
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 3(A/B) +1-2C
											<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - 2(A/B) + at least 3 C
										</span>
									</p>
								</div>
								<div class="row" style="display: none;">
                                
									<label class="col-lg-2 col-md-2 col-4"> DS-TB:</label>
									  <div class="col-lg-10 col-md-10 col-8">
										<div class="progress">
											<div  id="label-prob1" class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
												0% 
											</div>
										</div>
									  </div>
								  </div>
								  <div class="row"  style="display: none;">
									<label class="col-lg-2 col-md-2 col-4"> DR-TB:</label>
									  <div class="col-lg-10 col-md-10 col-8">
										<div class="progress">
											<div  id="label-prob2" class="progress-bar progress-bar-primary progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
												0% 
											</div>
										</div>
									  </div>
								  </div>
								  <div class="row"   style="display: none;">
									<label class="col-lg-2 col-md-2 col-4"> MDR-TB:</label>
									  <div class="col-lg-10 col-md-10 col-8">
										<div class="progress">
											<div  id="label-prob3" class="progress-bar progress-bar-warning progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
												0% 
											</div>
										</div>
									  </div>
								  </div>
								  <div class="row"   style="display: none;">
									<label class="col-lg-2 col-md-2 col-4"> XDR-TB:</label>
									  <div class="col-lg-10 col-md-10 col-8">
										<div class="progress">
											<div  id="label-prob4" class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
												0% 
											</div>
										</div>
									  </div>
								  </div>
							
							<a href="#" class="image main"><img  id='idImage' src="images/bg5.jpg" alt="" /></a>
							
						</article>
					</section>
					
				</footer>
				

				

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>



			        <!-- Core theme JS-->
					<script src="js/scripts.js"></script>
					<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
						<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
						<script type="text/javascript">
							// More API functions here:
							// https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image
			
							// the link to your model provided by Teachable Machine export panel
							// const URL = "https://teachablemachine.withgoogle.com/models/4xr4Chrfn/";
							const URL = "./my_model/";
							let model, webcam, labelContainer, maxPredictions;
			
			
							async function showFiles() {
				// An empty img element
				let demoImage = document.getElementById('idImage');
				// read the file from the user
				let file = document.querySelector('input[type=file]').files[0];
				const reader = new FileReader();
				reader.onload = function (event) {
					demoImage.src = reader.result;
				}
				reader.readAsDataURL(file);
			
				const modelURL = URL + "model.json";
				const metadataURL = URL + "metadata.json";
				model = await tmImage.load(modelURL, metadataURL);
				maxPredictions = model.getTotalClasses();
			
				labelProb1 = document.getElementById("label-prob1");
				labelProb2 = document.getElementById("label-prob2");
				labelProb3 = document.getElementById("label-prob3");
				labelProb4 = document.getElementById("label-prob4");
				
				//labelProb1.setAttribute("style", "width:50%");
			
				await predict();
			
			
				app();
			} 
			
			
							// Load the image model and setup the webcam
							async function init() {
								const modelURL = URL + "model.json";
								const metadataURL = URL + "metadata.json";
			
								// load the model and metadata
								// Refer to tmImage.loadFromFiles() in the API to support files from a file picker
								// or files from your local hard drive
								// Note: the pose library adds "tmImage" object to your window (window.tmImage)
								model = await tmImage.load(modelURL, metadataURL);
								maxPredictions = model.getTotalClasses();
			
								// Convenience function to setup a webcam
								const flip = true; // whether to flip the webcam
								//const flip = false; // whether to flip the webcam
								//webcam = new tmImage.Webcam(200, 200, flip); // width, height, flip
								//webcam = new tmImage.Webcam(350, 350, flip); // width, height, flip
								//await webcam.setup(); // request access to the webcam
								//กล้องหลัง
								//await webcam.setup({ facingMode: "environment" })
								//กล้องหน้า
								//await webcam.setup()
								//await webcam.play();
								//window.requestAnimationFrame(loop);
			
								// append elements to the DOM
								//document.getElementById("webcam-container").appendChild(webcam.canvas);
								labelContainer = document.getElementById("label-container");
								labelContainer2 = document.getElementById("label-container2");
								labelProb1 = document.getElementById("label-prob1");
								labelProb2 = document.getElementById("label-prob2");
								labelProb3 = document.getElementById("label-prob3");
								labelProb4 = document.getElementById("label-prob4");
								for (let i = 0; i < maxPredictions; i++) { // and class labels
									//labelContainer.appendChild(document.createElement("div"));
								}
							}
			
							async function loop() {
								//webcam.update(); // update the webcam frame
								await predict();
								window.requestAnimationFrame(loop);
							}
			
							// run the webcam image through the image model
							async function predict() {
								// predict can take in an image, video or canvas html element
								//alert(123);
					// predict can take in an image, video or canvas html element
					img_ = document.getElementById('idImage');
					const prediction = await model.predict(img_);
					let prob1 = prediction[0].probability.toFixed(2)*100;
					let prob2 = prediction[1].probability.toFixed(2)*100;
					let prob3 = prediction[2].probability.toFixed(2)*100;
					let prob4 = prediction[3].probability.toFixed(2)*100;
					//alert(prediction[0].probability)
					//alert(prob1)
					labelProb1.innerHTML = prob1 + "%";
					labelProb1.setAttribute("style", "width:"+prob1+"%");
					labelProb2.innerHTML = prob2 + "%";
					labelProb2.setAttribute("style", "width:"+prob2+"%");
					labelProb3.innerHTML = prob3 + "%";
					labelProb3.setAttribute("style", "width:"+prob3+"%");
					labelProb4.innerHTML = prob4 + "%";
					labelProb4.setAttribute("style", "width:"+prob4+"%");
			
					var d1 = document.getElementById("DIV1");
					var d2 = document.getElementById("DIV2");
					var d3 = document.getElementById("DIV3");
					var d4 = document.getElementById("DIV4");

					
					
					if(prob1>=60){
						d1.style.display = "block";
						d2.style.display = "none";
						d3.style.display = "none";
						d4.style.display = "none";
					}
					if(prob2>=60){
						d1.style.display = "none";
						d2.style.display = "block";
						d3.style.display = "none";
						d4.style.display = "none";
					}
					if(prob3>=60){
						d1.style.display = "none";
						d2.style.display = "none";
						d3.style.display = "block";
						d4.style.display = "none";
					}
					if(prob4>=60){
						d1.style.display = "none";
						d2.style.display = "none";
						d3.style.display = "none";
						d4.style.display = "block";
					}
			
							}
						</script>
	</body>
</html>